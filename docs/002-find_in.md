
![logo](cmd25.png)

find_in.exe
-----------

Поиск файлов или каталогов.  
Синтаксис:  

```
garbage.exe --help  выводит в консоль текст с описанием дизайна
```

```
find_in 
    "--start: dirs-where-search"       [required] список путей, где нужно искать.
    "--mask:  masks-dir-or-files"      [optional] файловая маска: какие нужно искать файлы или каталоги.
    "--S:     include-scan-dirs-masks" [optional] файловая маска: какие подкаталоги обходим.
    "--ES:    exclude-scan-dirs-masks" [optional] файловая маска: какие подкаталоги игнорируем.
    "--D:     include-dirs-masks"      [optional] файловая маска: какие каталоги ищем.
    "--ED:    exclude-dirs-masks"      [optional] файловая маска: какие каталоги игнорируем.
    "--F:     include-files-masks"     [optional] файловая маска: какие файлы ищем.
    "--EF:    exclude-files-masks"     [optional] файловая маска: какие файлы не ищем.
    "--VF:    valid-files-masks"       [optional] файловая маска: какие файлы оставляем в итоге.
    "--VD:    valid-dirs-masks"        [optional] файловая маска: какие каталоги оставляем в итоге.
    "--dirnames"                       [optional] флаг: интересует не файл, а каталог, где он был обнаружен.
    "--exe32"                          [optional] флаг: интересуют только 32 битные приложения.
    "--exe64"                          [optional] флаг: интересуют только 64 битные приложения
    "--debug"                          [optional] флаг: выводить подробный лог о ходе работы.
    "--once"                           [optional] флаг: нужно ли прекратить поиск после обнаружения первой цели.
```

Пример 1  
--------

Выполняем поиск каталога, где расположена программа 7z.exe.  
Мы предполагаем, что располагаться программа может только и только в каталогах `7-Zip*`  
Как только обнаружим нужный нам файл, сразу же прекращаем поиск:  

```
    set dirs=                    ^
        eDIR_ROOT\programs\x64;  ^
        C:\Program Files;        ^
        eDIR_ROOT\programs\x86;  ^
        C:\Program Files (x86);  ^
        D:\long\workspace\programs\x64

    for /f "usebackq" %%a in (
        `find_in.exe "--start:%dirs%" "--S:7-Zip*" "--F:7z.exe" "--once" "--dirnames"`
    ) do (
        set "ePATH_7Z=%%a"
    )
```

Обратите внимание: в путях можно использовать имена [eПЕРЕМЕННЫХ][0].  
Вместо `eDIR_ROOT` будет подставлено её значение.  

Пример 2  
--------

Выполняем поиск всех программ `*-test.exe`  
Мы не знаем в каких подкаталогах они могут быть.  
Но мы знаем что эти файлы находятся где-то в каталоге `project`  
Относительный путь принимается относительно текущего рабочего каталога.  
Ещё мы знаем, что наши файлы находятся где-то в подкаталогах `*-msvc-*`  

```
    for /f "usebackq" %%a in (
        `find_in.exe "--start:project" "--F:*.exe" "--VF:*-msvc-*"`
    ) do (
        @echo [FOUND] "%%a"
    )
```

Будут отобраны все `*.exe`, 
у которых в файловом пути присутствует фрагмент: `*-msvc-*`  


Пример 3  
--------

Выполняем поиск всех программ `*-test.exe`  
Причем, файлы, которые расположены внутри `mingw*-dynamic`,
должны быть проигнорированы.  

```
    set "eDIRS=c:\products"
    for /f "usebackq" %%a in (
        `find_in.exe "--start: eDIRS" "--F: *.exe" "--ES: mingw*-dynamic"`
    ) do (
        @echo [FOUND] "%%a"
    )
```

Обратите внимание: `--start: eDIRS`  
Во всех аргументах команды можно использовать имена [eПЕРЕМЕННЫХ][0].  
`eПЕРЕМЕННАЯ` - переменная, которая начинается с маленькой буквы `e`, 
а все остальные буквы - заглавные.  

Пример 3  
--------

Нужно найти 32х битные компиляторы mingw.  
При этом, нас интересуют не сами файлы `gcc`, 
а каталоги, в которых они расположены.  

```
    set dirs=                                  ^
        eDIR_WORKSPACE\programs\x86\mingw-w64; ^
        C:\Program Files (x86)\mingw-w64;      ^
        C:\TDM-GCC-32

    set "eSYMPTOMS=mingw*;*rev*;*posix*;*seh*;*dwarf*;bin"
    for /f "usebackq" %%a in (
        `find_in.exe "--start: %dirs%" "--S: eSYMPTOMS" "--F: gcc.exe" "--exe32" --dirnames`
    ) do (
        @echo [FOUND] "%%a"
    )
```

`eSYMPTOMS` - еПЕРЕМЕННАЯ  

[0]: #eVARIABLE "начинается с маленькой буквы `e`, остальные буквы - заглавные"  

## eVARIABLE 
`еПЕРЕМЕННЫЕ` - это переменные которые начинаются с маленькой буквы `e`.  
Все остальные буквы - заглавные.  
Многие утилиты [WorkSpace](https://github.com/Kartonagnick/workspace) автоматически подставляют вместо `eVARIABLE` её значение.  
Очень удобно формировать пути, итоговое значение которых зависит от значения переменной.  
Процедура раскрытия `еПЕРЕМЕННЫХ` называется `expand`


